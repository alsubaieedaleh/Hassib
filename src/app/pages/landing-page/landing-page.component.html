<div class="landing page-container">
  <section class="hero-surface card">
    <div class="hero-grid">
      <div class="hero-copy">
        <span class="section-eyebrow">Retail toolkit</span>
        <h1 class="hero-title">Modern POS &amp; inventory control in one place</h1>
        <p class="hero-text">
          Empower cashiers, accountants, and managers with a unified workspace. Hassib keeps
          sales, inventory, and quick calculators a tap away on any device.
        </p>

        <div class="hero-actions">
          <a routerLink="/sales" class="btn primary">Open sales workspace</a>
          <a routerLink="/storage" class="btn ghost">Manage inventory</a>
        </div>

        <ul class="hero-highlights">
          <li>Realtime VAT, margin, and payment helpers</li>
          <li>Offline-first storage with instant exports</li>
          <li>Optimised for tablets, phones, and desktop</li>
        </ul>
      </div>

      <div class="hero-metrics" aria-label="Inventory at a glance">
        @for (kpi of kpis(); track kpi.label) {
          <div class="metric-card">
            <span class="metric-label">{{ kpi.label }}</span>
            <span class="metric-value">{{ kpi.value() }}</span>
          </div>
        }
      </div>
    </div>
  </section>

  <section class="toolkit">
    <header class="toolkit-header">
      <span class="section-eyebrow">Daily operations</span>
      <h2 class="section-title">Streamlined helpers for every transaction</h2>
      <p class="section-subtitle">
        Reduce manual math, keep pricing accurate, and give your frontline team an intuitive
        checklist of financial tools.
      </p>
    </header>

    <div class="tools-grid">
      <section class="card tool-card">
        <h2 class="card-title">VAT calculator</h2>
        <p class="muted">Convert between net and gross totals, including or excluding VAT.</p>

        <div class="form-row">
          <label class="strong">Mode</label>
          <div class="segmented">
            <button type="button" [class.active]="mode()==='net'" (click)="setMode('net')">
              Net → Gross
            </button>
            <button type="button" [class.active]="mode()==='gross'" (click)="setMode('gross')">
              Gross → Net
            </button>
          </div>
        </div>

        <div class="form-grid">
          <label>Amount</label>
          <input type="number" min="0" step="0.01" [value]="amount()" (input)="amount.set(num($event))" />

          <label>VAT %</label>
          <input type="number" min="0" step="0.1" [value]="vatRate()" (input)="vatRate.set(num($event))" />
        </div>

        <div class="results three">
          @for (r of vatResults(); track r.label) {
            <div class="result-item">
              <span class="result-label">{{ r.label }}</span>
              <span class="result-value">{{ r.value() }}</span>
            </div>
          }
        </div>
      </section>

      <section class="card tool-card">
        <h2 class="card-title">Change helper</h2>
        <p class="muted">Instantly work out customer change and suggested note breakdowns.</p>

        <div class="form-grid">
          <label>Amount due</label>
          <input type="number" min="0" step="0.01" [value]="due()" (input)="due.set(num($event))" />

          <label>Amount paid</label>
          <input type="number" min="0" step="0.01" [value]="paid()" (input)="paid.set(num($event))" />
        </div>

        <div class="results two">
          <div class="result-item big">
            <span class="result-label">Change</span>
            <span class="result-value">SAR {{ change().toFixed(2) }}</span>
          </div>
        </div>

        <div class="breakdown" aria-live="polite">
          @for (b of changeBreakdown(); track $index) {
            <span class="chip">{{ b.count }} × {{ b.denom }}</span>
          }
        </div>
      </section>

      <section class="card tool-card">
        <h2 class="card-title">Margin &amp; markup</h2>
        <p class="muted">Quick profit, margin, and markup calculations for product pricing.</p>

        <div class="form-grid">
          <label>Cost (SAR)</label>
          <input type="number" min="0" step="0.01" [value]="cost()" (input)="cost.set(num($event))" />

          <label>Price (SAR)</label>
          <input type="number" min="0" step="0.01" [value]="price()" (input)="price.set(num($event))" />
        </div>

        <div class="results three">
          @for (r of marginResults(); track r.label) {
            <div class="result-item">
              <span class="result-label">{{ r.label }}</span>
              <span class="result-value">{{ r.value() }}</span>
            </div>
          }
        </div>
      </section>

      <section class="card tool-card">
        <h2 class="card-title">Split payments</h2>
        <p class="muted">Divide totals between cash, Mada, credit, or on-account terms.</p>

        <div class="form-grid">
          <label>Total (SAR)</label>
          <input type="number" min="0" step="0.01" [value]="totalToSplit()" (input)="totalToSplit.set(num($event))" />

          <label>Ratios (sum any values)</label>
          <div class="split-grid">
            @for (f of splitFields; track f.key) {
              <div class="split-row">
                <span>{{ f.label }}</span>
                <input
                  type="number"
                  min="0"
                  step="1"
                  [value]="split()[f.key]"
                  (input)="setSplit(f.key, num($event))"
                />
              </div>
            }
          </div>
        </div>

        <div class="results two">
          @for (r of splitResults(); track r.label) {
            <div class="result-item">
              <span class="result-label">{{ r.label }}</span>
              <span class="result-value">{{ r.value() }}</span>
            </div>
          }
        </div>
      </section>

      <section class="card tool-card">
        <h2 class="card-title">Barcode lookup</h2>
        <p class="muted">Find a stored product instantly and jump into a sale or stock update.</p>

        <div class="form-row">
          <label>Barcode</label>
          <input
            placeholder="Scan or type barcode..."
            [value]="queryBarcode()"
            (input)="onBarcodeInput($event)"
          />
        </div>

        @if (foundProduct(); as p) {
          <div class="lookup">
            <div class="lookup-row"><span>Barcode</span><span class="muted">{{ p.barcode }}</span></div>
            <div class="lookup-row"><span>Name</span><span class="strong">{{ p.name }}</span></div>
            <div class="lookup-row"><span>Qty</span><span>{{ p.qty }}</span></div>
            <div class="lookup-row"><span>Cost</span><span>SAR {{ p.cost.toFixed(2) }}</span></div>
            <div class="lookup-row"><span>Price</span><span class="strong">SAR {{ p.price.toFixed(2) }}</span></div>

            <div class="hero-actions">
              <a routerLink="/sales" class="btn primary">Sell this item</a>
              <a routerLink="/storage" class="btn ghost">Open storage</a>
            </div>
          </div>
        } @else {
          <div class="empty-state">
            <p>No product selected. Scan a barcode to see details or add it to storage.</p>
            <a routerLink="/storage" class="btn ghost">Add a new product</a>
          </div>
        }
      </section>
    </div>
  </section>

  <section class="shortcuts card">
    <h2 class="card-title">Quick actions</h2>
    <p class="muted">Jump directly into the workspace you need.</p>
    <div class="chip-list">
      <a routerLink="/sales" class="chip">New sale</a>
      <a routerLink="/storage" class="chip">Import inventory</a>
      <a routerLink="/storage" class="chip">Manage products</a>
      <a routerLink="/sales" class="chip">Session exports</a>
    </div>
  </section>
</div>
