<div class="space-y-6">
  <!-- Loop over each product form -->
  @for (form of productForms(); track $index) {
    <div class="space-y-4 border p-4 rounded-md bg-gray-50">
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
        <div class="flex flex-col">
          <label class="text-sm font-medium text-gray-600">Barcode</label>
<input type="text"
       class="input"
       [value]="form.barcode()"
       (input)="onStringInput(form.barcode, $event)"></div>

        <div class="flex flex-col">
          <label class="text-sm font-medium text-gray-600">Product Name</label>
<input type="text"
       class="input"
       [value]="form.name()"
       (input)="onStringInput(form.name, $event)">      </div>

        <div class="flex flex-col">
          <label class="text-sm font-medium text-gray-600">Quantity</label>
<input type="number"
       class="input"
       min="1"
       [value]="form.qty()"
       (input)="form.qty.set(parseInputNumber($event))">        </div>

        <div class="flex flex-col">
          <label class="text-sm font-medium text-gray-600">Sell Price (SAR)</label>
<input type="number"
       class="input"
       step="0.01"
       min="0"
       [value]="form.price()"
       (input)="form.price.set(parseInputNumber($event))">        </div>

        <div class="flex flex-col">
          <label class="text-sm font-medium text-gray-600">Cost Price (SAR)</label>
<input type="number"
       class="input"
       step="0.01"
       min="0"
       [value]="form.cost()"
       (input)="form.cost.set(parseInputNumber($event))">


        </div>
      </div>
    </div>
  }

  <!-- Add Product Button -->
  <button class="mt-2 text-teal-600 hover:underline text-sm" (click)="addProduct()">+ Add another product</button>

  <!-- Shared fields (payment, phone, VAT) -->
  <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
    <div class="flex flex-col">
      <label class="text-sm font-medium text-gray-600">VAT (%) â€” FIXED</label>
      <input type="number" readonly class="input bg-gray-100" [value]="vatrate()">
    </div>

    <div class="flex flex-col">
      <label class="text-sm font-medium text-gray-600">Payment Type</label>
      <select class="input" [value]="payment()" (change)="onPaymentChange($event)">
        @for (opt of paymentOptions; track opt) {
          <option [value]="opt">{{ opt }}</option>
        }
      </select>
    </div>

    <div class="flex flex-col">
      <label class="text-sm font-medium text-gray-600">Customer phone (optional)</label>
      <input type="text" class="input" [value]="phone()" (input)="onPhoneInput($event)">
    </div>
  </div>

  <!-- Actions -->
  <div class="flex gap-3 mt-4">
    <button class="bg-teal-600 hover:bg-teal-700 text-white text-sm font-medium px-4 py-2 rounded-md shadow" (click)="submit()">Add to Session</button>
    <button class="bg-gray-100 hover:bg-gray-200 text-gray-800 text-sm font-medium px-4 py-2 rounded-md shadow" (click)="clear()">Clear</button>
  </div>
</div>
