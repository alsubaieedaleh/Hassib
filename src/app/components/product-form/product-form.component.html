<!-- ðŸŒŸ PRODUCT FORMS SECTION -->
<div class="w-full max-w-screen-lg mx-auto px-4 space-y-6">
  <h2 class="text-lg font-semibold text-gray-700 flex items-center gap-2">
    <svg class="w-5 h-5 text-green-500" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <path d="M3 12l2-2 4 4 8-8 4 4-12 12z" />
    </svg>
    Product Entries
  </h2>

  @for (form of productForms(); track $index) {
    <div class="relative rounded-xl border border-gray-200 p-4 sm:p-6 bg-white shadow-sm space-y-4 overflow-hidden">

      @if (productForms().length > 1) {
        <button
          class="absolute top-2 right-2 text-red-500 hover:text-red-600 p-1 rounded-full transition"
          (click)="removeProduct($index)" aria-label="Remove product">
          <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6L6 18" stroke-linecap="round" />
            <path d="M6 6l12 12" stroke-linecap="round" />
          </svg>
        </button>
      }

      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
        @for (field of productFields; track field.key) {
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">{{ field.label }}</label>
            <input
              [type]="field.type"
              class="block w-full rounded-md border border-gray-300 shadow-sm focus:ring-green-500 focus:border-green-500 text-sm px-3 py-2"
              [attr.placeholder]="field.placeholder"
              [value]="field.getter(form)"
              [step]="field.step"
              [min]="field.min"
              (input)="field.onInput(form, $event)"
            />
          </div>
        }
      </div>
    </div>
  }

  <!-- Add Product Button -->
  <button
    class="text-sm text-green-600 hover:text-green-800 flex items-center gap-1 mt-1"
    (click)="addProduct()"
  >
    <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <path d="M12 5v14M5 12h14" />
    </svg>
    Add another product
  </button>

  <hr class="my-6 border-gray-200" />

  <!-- ðŸ§¾ SALE METADATA SECTION -->
  <div class="space-y-4">
    <h2 class="text-lg font-semibold text-gray-700 flex items-center gap-2">
      <svg class="w-5 h-5 text-green-500" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <circle cx="12" cy="12" r="10" />
        <path d="M12 6v6l4 2" />
      </svg>
      Sale Details
    </h2>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
      @if (showVAT()) {
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">VAT (%)</label>
          <input
            type="number"
            readonly
            class="block w-full bg-gray-100 text-sm rounded-md border border-gray-300 px-3 py-2 cursor-not-allowed"
            placeholder="VAT Rate"
            [value]="fixedVATRate()"
          />
        </div>
      }

      @if (showPayment()) {
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Payment Type</label>
          <select
            class="block w-full rounded-md border border-gray-300 shadow-sm text-sm px-3 py-2"
            [value]="payment()"
            (change)="onPaymentChange($event)"
          >
            @for (opt of paymentOptions; track opt) {
              <option [value]="opt">{{ opt }}</option>
            }
          </select>
        </div>
      }

      @if (showPhone()) {
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Customer Phone</label>
          <input
            type="text"
            class="block w-full rounded-md border border-gray-300 shadow-sm text-sm px-3 py-2"
            placeholder="Customer Phone"
            [value]="phone()"
            (input)="onPhoneInput($event)"
          />
        </div>
      }
    </div>
  </div>

  <hr class="my-6 border-gray-200" />

  <!-- âœ… SUBMIT BUTTONS -->
  <div class="flex flex-col sm:flex-row gap-3">
    <button
      class="w-full sm:w-auto bg-green-600 hover:bg-green-700 text-white text-sm font-medium px-5 py-2 rounded-md shadow flex items-center justify-center gap-2 transition"
      (click)="submit()"
    >
      <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M5 13l4 4L19 7" />
      </svg>
      {{ submitLabel() }}
    </button>

    <button
      class="w-full sm:w-auto bg-gray-100 hover:bg-gray-200 text-gray-800 text-sm font-medium px-5 py-2 rounded-md shadow flex items-center justify-center gap-2 transition"
      (click)="clear()"
    >
      <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M3 6h18M9 6v12M15 6v12" />
      </svg>
      Clear
    </button>
  </div>
</div>
