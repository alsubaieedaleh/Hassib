<div style="overflow:auto">
  <table aria-live="polite">
    <thead>
      <tr>
        @for (col of columns; track col.key) {
          <th>{{ col.label }}</th>
        }
      </tr>
    </thead>

    <tbody>
      @for (ln of lines(); track $index; let i = $index) {
        <tr>
          @for (col of columns; track col.key) {
            <td [class]="col.class">{{ col.format ? col.format(ln, i) : '' }}</td>
          }
        </tr>
      }
    </tbody>

    <tfoot>
      <tr>
        <td colspan="3">Totals</td>
        <td>{{ totalQty() }}</td>
        <td>SAR {{ totalCost() | number:'1.2-2' }}</td>
        <td>SAR {{ totalGross() | number:'1.2-2' }}</td>
        <td>SAR {{ totalVAT() | number:'1.2-2' }}</td>
        <td>SAR {{ totalProfit() | number:'1.2-2' }}</td>
        <td colspan="2"></td>
      </tr>
      <tr>
        <td colspan="4"></td>
        <td colspan="6" style="text-align:left;padding-left:10px;">
          <strong>By Payment:</strong> {{ paymentBreakdownText() }}
        </td>
      </tr>
    </tfoot>
  </table>
</div>
