<!-- âœ… Responsive Table Wrapper: scroll on small screens only -->
<div class="w-full overflow-x-auto">
  <table class="w-full text-sm min-w-max" aria-live="polite">
    <thead>
      <tr>
        @for (col of columns; track col.key) {
          <th class="text-left px-2 py-1 whitespace-nowrap">{{ col.label }}</th>
        }
      </tr>
    </thead>

    <tbody>
      @for (ln of lines(); track $index; let i = $index) {
        <tr>
          @for (col of columns; track col.key) {
            <td class="px-2 py-1 whitespace-nowrap" [class]="col.class">
              {{ col.format ? col.format({ line: ln, index: i }) : '' }}
            </td>
          }
        </tr>
      }
    </tbody>

    <tfoot>
      @for (footerRow of [0, 1]; track $index; let r = $index) {
        <tr>
          @if (r === 0) {
            <td colspan="3" class="px-2 py-1 font-semibold">Totals</td>
            <td class="px-2 py-1">{{ totalQty() }}</td>
            <td class="px-2 py-1">SAR {{ totalCost() | number:'1.2-2' }}</td>
            <td class="px-2 py-1">SAR {{ totalGross() | number:'1.2-2' }}</td>
            <td class="px-2 py-1">SAR {{ totalVAT() | number:'1.2-2' }}</td>
            <td class="px-2 py-1">SAR {{ totalProfit() | number:'1.2-2' }}</td>
            <td colspan="2"></td>
          } @else {
            <td colspan="4"></td>
            <td colspan="6" class="text-left px-2 py-1">
              <strong>By Payment:</strong> {{ paymentBreakdownText() }}
            </td>
          }
        </tr>
      }
    </tfoot>
  </table>
</div>

