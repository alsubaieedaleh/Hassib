<section class="summary-card">
  <header class="summary-header">
    <h2>Session overview</h2>
    <p class="muted">Track totals as you register each item. Export options appear below.</p>
  </header>

  @if (lines().length > 0) {
    <div #reportRoot>
      <div class="summary-grid">
        @for (m of metrics(); track m.label) {
          <div class="summary-metric">
            <span class="summary-label">{{ m.label }}</span>
            <span class="summary-value">{{ m.value() }}</span>
          </div>
        }
      </div>

      <div class="summary-breakdown">
        <span class="summary-label">Payment mix</span>
        <span class="muted">{{ paymentBreakdownText() }}</span>
      </div>
    </div>

    <div class="summary-actions">
      @for (a of actions(); track a.key) {
        <button class="{{ a.css }}" (click)="a.run()">{{ a.label }}</button>
      }
    </div>
  } @else {
    <div class="summary-empty">
      <p>No session lines yet. Start by adding products on the left.</p>
    </div>
  }

  <footer class="summary-footer">
    <small>Tip: exports stay on your device until you choose to share them.</small>
  </footer>
</section>
